{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "LCL Design System 2.0 Upgrade Specification",
  "version": "2.0.0",
  "lastUpdated": "2026-01-11",
  "description": "Pixel-perfect audit and upgrade specification for the LCL hyper-local social/event app",
  
  "digitalTwinExtraction": {
    "currentGlassRecipe": {
      "primary": {
        "background": "bg-white/10",
        "backdrop": "backdrop-blur-xl",
        "border": "border-white/20"
      },
      "secondary": {
        "background": "bg-white/90",
        "backdrop": "backdrop-blur-xl", 
        "border": "border-gray-200/50"
      },
      "navigation": {
        "background": "bg-black/90",
        "backdrop": "backdrop-blur-xl",
        "border": "border-white/10"
      }
    },
    "currentDepthHierarchy": {
      "surface1_background": {
        "light": "bg-[#F8F9FA]",
        "dark": "bg-gradient-to-br from-zinc-900 via-zinc-800 to-zinc-900"
      },
      "surface2_cards": {
        "light": "bg-white rounded-2xl border border-gray-100 shadow-sm",
        "dark": "bg-white/10 backdrop-blur-xl border border-white/20"
      },
      "surface3_floating": {
        "navigation": "bg-black/90 backdrop-blur-xl rounded-full shadow-2xl",
        "modal": "bg-white/95 backdrop-blur-2xl rounded-3xl shadow-2xl"
      }
    }
  },

  "criticalAudit": {
    "weakness1_opticalBalance": {
      "issue": "Inconsistent spacing in section headers - gap-2 used everywhere but margin/padding varies between 4px to 12px",
      "location": ["Index.tsx:136-145", "Index.tsx:234-253"],
      "severity": "medium",
      "fix": "Standardize section header margins to mb-6 and use consistent gap-3 for icon+text combinations"
    },
    "weakness2_glassContrast": {
      "issue": "SmartBadge and glass overlays on images have insufficient contrast - text-white on bg-white/10 with busy backgrounds fails WCAG AA",
      "location": ["AnchorCard.tsx:40-43", "SmartBadge.tsx:15-30"],
      "severity": "high",
      "fix": "Add shadow-sm to text or increase background opacity to bg-black/40 for better legibility on variable backgrounds"
    },
    "weakness3_touchTargets": {
      "issue": "Several buttons are below 44px minimum touch target - notification bell at 40px, some inline actions at 32px",
      "location": ["Index.tsx:127", "ForkedCard.tsx:62-65"],
      "severity": "high",
      "fix": "Increase all interactive elements to minimum 44px height/width, use p-3 minimum for icon buttons"
    },
    "weakness4_cardElevation": {
      "issue": "Cards lack sufficient elevation distinction - shadow-sm too subtle, no clear visual hierarchy between card levels",
      "location": ["ForkedCard.tsx:40", "NicheCard.tsx:38"],
      "severity": "medium",
      "fix": "Use layered shadows with shadow-[0_8px_32px_rgba(0,0,0,0.08)] for main cards and shadow-[0_4px_16px_rgba(0,0,0,0.06)] for nested cards"
    },
    "weakness5_colorAccessibility": {
      "issue": "Some status colors (text-blue-300, text-zinc-500) have poor contrast ratios against dark and light backgrounds",
      "location": ["AnchorCard.tsx:49", "Index.tsx:120"],
      "severity": "medium",
      "fix": "Use text-blue-400 minimum for dark backgrounds and text-zinc-600 minimum for light backgrounds"
    }
  },

  "colors": {
    "brand": {
      "primary": "#B4FF39",
      "primaryHover": "#a3ed28",
      "primaryForeground": "#18181B"
    },
    "surface": {
      "background": "#F8F9FA",
      "card": "#FFFFFF",
      "cardElevated": "#FFFFFF",
      "overlay": "rgba(0, 0, 0, 0.5)"
    },
    "glass": {
      "light": {
        "background": "rgba(255, 255, 255, 0.95)",
        "border": "rgba(255, 255, 255, 0.20)"
      },
      "dark": {
        "background": "rgba(0, 0, 0, 0.85)",
        "border": "rgba(255, 255, 255, 0.15)"
      },
      "imageOverlay": {
        "background": "rgba(0, 0, 0, 0.40)",
        "border": "rgba(255, 255, 255, 0.25)"
      }
    },
    "text": {
      "primary": "#18181B",
      "secondary": "#52525B",
      "tertiary": "#71717A",
      "inverse": "#FFFFFF",
      "muted": "#A1A1AA"
    },
    "category": {
      "cinema": {
        "primary": "#3B82F6",
        "light": "#DBEAFE",
        "text": "#1E40AF"
      },
      "crafts": {
        "primary": "#D4886F",
        "light": "#F5F1E8",
        "text": "#4A4036"
      },
      "sports": {
        "primary": "#FFD700",
        "light": "#FEF9C3",
        "text": "#000000"
      },
      "gaming": {
        "primary": "#00FF88",
        "light": "#0F1115",
        "text": "#FFFFFF"
      },
      "market": {
        "primary": "#F97316",
        "light": "#FFF7ED",
        "text": "#9A3412"
      }
    },
    "semantic": {
      "success": "#22C55E",
      "warning": "#F59E0B",
      "error": "#EF4444",
      "info": "#3B82F6"
    }
  },

  "spacing": {
    "baseUnit": 4,
    "scale": {
      "0": "0px",
      "1": "4px",
      "2": "8px",
      "3": "12px",
      "4": "16px",
      "5": "20px",
      "6": "24px",
      "8": "32px",
      "10": "40px",
      "12": "48px",
      "16": "64px",
      "20": "80px",
      "24": "96px"
    },
    "sectionGap": "48px",
    "cardPadding": "24px",
    "componentGap": "16px",
    "iconTextGap": "12px",
    "inlineGap": "8px"
  },

  "glassEffects": {
    "surface_glass_light": {
      "tailwind": "bg-white/95 backdrop-blur-xl border border-white/20 shadow-[0_8px_32px_rgba(0,0,0,0.08)]",
      "css": {
        "background": "rgba(255, 255, 255, 0.95)",
        "backdropFilter": "blur(24px)",
        "border": "1px solid rgba(255, 255, 255, 0.20)",
        "boxShadow": "0 8px 32px rgba(0, 0, 0, 0.08)"
      }
    },
    "surface_glass_dark": {
      "tailwind": "bg-black/85 backdrop-blur-2xl border border-white/15 shadow-[0_8px_32px_rgba(0,0,0,0.4)]",
      "css": {
        "background": "rgba(0, 0, 0, 0.85)",
        "backdropFilter": "blur(40px)",
        "border": "1px solid rgba(255, 255, 255, 0.15)",
        "boxShadow": "0 8px 32px rgba(0, 0, 0, 0.4)"
      }
    },
    "badge_glass_overlay": {
      "tailwind": "bg-black/40 backdrop-blur-md border border-white/25 shadow-lg",
      "css": {
        "background": "rgba(0, 0, 0, 0.40)",
        "backdropFilter": "blur(12px)",
        "border": "1px solid rgba(255, 255, 255, 0.25)",
        "boxShadow": "0 4px 16px rgba(0, 0, 0, 0.2)"
      },
      "note": "Use for badges/chips on variable image backgrounds for guaranteed legibility"
    },
    "nav_glass": {
      "tailwind": "bg-black/90 backdrop-blur-2xl border border-white/10 shadow-[0_8px_40px_rgba(0,0,0,0.5)]",
      "css": {
        "background": "rgba(0, 0, 0, 0.90)",
        "backdropFilter": "blur(40px)",
        "border": "1px solid rgba(255, 255, 255, 0.10)",
        "boxShadow": "0 8px 40px rgba(0, 0, 0, 0.5)"
      }
    }
  },

  "depthHierarchy": {
    "surface1_background": {
      "description": "Page-level background, lowest visual layer",
      "tailwind": "bg-[#F8F9FA]",
      "zIndex": 0
    },
    "surface2_cards": {
      "description": "Content cards sitting on the background",
      "tailwind": "bg-white rounded-3xl border border-gray-100 shadow-[0_4px_24px_rgba(0,0,0,0.06)]",
      "zIndex": 10
    },
    "surface3_elevated": {
      "description": "Primary interactive cards like AnchorCard",
      "tailwind": "bg-black rounded-[2.5rem] shadow-[0_8px_32px_rgba(0,0,0,0.15)]",
      "zIndex": 20
    },
    "surface4_floating": {
      "description": "Floating action elements, modals, navigation",
      "tailwind": "shadow-[0_12px_48px_rgba(0,0,0,0.25)]",
      "zIndex": 40
    },
    "surface5_overlay": {
      "description": "Modal overlays and critical UI",
      "tailwind": "bg-black/50 backdrop-blur-sm",
      "zIndex": 50
    }
  },

  "typography": {
    "fontFamilies": {
      "sans": "'Inter', system-ui, sans-serif",
      "display": "'Playfair Display', serif",
      "athletic": "'Oswald', sans-serif",
      "mono": "'JetBrains Mono', monospace"
    },
    "scale": {
      "xs": { "size": "12px", "lineHeight": "16px", "tracking": "0.01em" },
      "sm": { "size": "14px", "lineHeight": "20px", "tracking": "0" },
      "base": { "size": "16px", "lineHeight": "24px", "tracking": "0" },
      "lg": { "size": "18px", "lineHeight": "28px", "tracking": "-0.01em" },
      "xl": { "size": "20px", "lineHeight": "28px", "tracking": "-0.01em" },
      "2xl": { "size": "24px", "lineHeight": "32px", "tracking": "-0.02em" },
      "3xl": { "size": "30px", "lineHeight": "36px", "tracking": "-0.02em" },
      "4xl": { "size": "36px", "lineHeight": "40px", "tracking": "-0.02em" },
      "5xl": { "size": "48px", "lineHeight": "48px", "tracking": "-0.03em" }
    },
    "weights": {
      "normal": 400,
      "medium": 500,
      "semibold": 600,
      "bold": 700
    }
  },

  "borderRadius": {
    "sm": "8px",
    "md": "12px",
    "lg": "16px",
    "xl": "20px",
    "2xl": "24px",
    "3xl": "32px",
    "full": "9999px"
  },

  "shadows": {
    "sm": "0 1px 2px rgba(0, 0, 0, 0.05)",
    "md": "0 4px 16px rgba(0, 0, 0, 0.06)",
    "lg": "0 8px 32px rgba(0, 0, 0, 0.08)",
    "xl": "0 12px 48px rgba(0, 0, 0, 0.12)",
    "2xl": "0 24px 64px rgba(0, 0, 0, 0.18)",
    "card": "0 4px 24px rgba(0, 0, 0, 0.06)",
    "cardHover": "0 8px 32px rgba(0, 0, 0, 0.1)",
    "float": "0 8px 40px rgba(0, 0, 0, 0.15)",
    "nav": "0 8px 40px rgba(0, 0, 0, 0.5)"
  },

  "componentChanges": {
    "AnchorCard": {
      "changes": [
        {
          "element": "Main Card Container",
          "from": "shadow-2xl",
          "to": "shadow-[0_8px_32px_rgba(0,0,0,0.25)]",
          "reason": "More refined, controlled shadow for card separation from map/background"
        },
        {
          "element": "Smart Badge",
          "from": "bg-white/10 backdrop-blur-md border-white/20",
          "to": "bg-black/40 backdrop-blur-md border border-white/25 shadow-lg",
          "reason": "Improved legibility on variable image backgrounds - WCAG AA compliant"
        },
        {
          "element": "Event Title",
          "from": "text-4xl md:text-5xl font-bold",
          "to": "text-4xl md:text-5xl font-bold drop-shadow-[0_2px_4px_rgba(0,0,0,0.5)]",
          "reason": "Enhanced text legibility with subtle text shadow on image backgrounds"
        },
        {
          "element": "Date/Distance Text",
          "from": "text-blue-300",
          "to": "text-blue-400",
          "reason": "Improved contrast ratio for accessibility"
        }
      ]
    },
    "FloatingNav": {
      "changes": [
        {
          "element": "Nav Container",
          "from": "bg-black/90 backdrop-blur-xl shadow-2xl border-white/10",
          "to": "bg-black/90 backdrop-blur-2xl shadow-[0_8px_40px_rgba(0,0,0,0.5)] border border-white/15",
          "reason": "Deeper blur and more pronounced shadow for floating effect"
        },
        {
          "element": "Nav Buttons",
          "from": "p-3.5 rounded-full",
          "to": "p-3 min-w-[48px] min-h-[48px] rounded-full flex items-center justify-center",
          "reason": "Ensure 48px minimum touch target for better mobile usability (exceeds 44px minimum)"
        }
      ]
    },
    "ForkedCard": {
      "changes": [
        {
          "element": "Card Container",
          "from": "shadow-sm",
          "to": "shadow-[0_4px_16px_rgba(0,0,0,0.06)]",
          "reason": "Subtle but visible elevation for card hierarchy"
        },
        {
          "element": "Join Button",
          "from": "px-4 py-2",
          "to": "px-5 py-2.5 min-h-[44px]",
          "reason": "Meet 44px minimum touch target requirement"
        }
      ]
    },
    "NicheCard": {
      "changes": [
        {
          "element": "All Variant Containers",
          "from": "shadow-lg",
          "to": "shadow-[0_8px_32px_rgba(0,0,0,0.12)]",
          "reason": "Consistent shadow system across card types"
        },
        {
          "element": "Action Buttons",
          "from": "py-3",
          "to": "py-3.5 min-h-[48px]",
          "reason": "Exceed 44px touch target for comfortable mobile interaction"
        }
      ]
    },
    "Header": {
      "changes": [
        {
          "element": "Notification Button",
          "from": "w-10 h-10",
          "to": "w-11 h-11",
          "reason": "Meet 44px minimum touch target (44px = w-11 = 2.75rem)"
        },
        {
          "element": "Header Container",
          "from": "bg-[#F8F9FA]/90 backdrop-blur-md",
          "to": "bg-white/95 backdrop-blur-xl shadow-[0_1px_2px_rgba(0,0,0,0.05)]",
          "reason": "Improved glass effect with subtle shadow for depth"
        }
      ]
    },
    "SlideToCommit": {
      "changes": [
        {
          "element": "Container",
          "from": "h-16",
          "to": "h-[60px]",
          "reason": "Slightly taller for better touch comfort"
        },
        {
          "element": "Handle",
          "from": "w-14",
          "to": "w-[56px] min-h-[52px]",
          "reason": "Ensure generous touch target for swipe interaction"
        }
      ]
    },
    "SmartBadge": {
      "changes": [
        {
          "element": "Container",
          "from": "bg-white/90 backdrop-blur-md border-white/20",
          "to": "bg-black/40 backdrop-blur-md border border-white/30 shadow-lg",
          "reason": "Dark glass for reliable contrast on any background image"
        },
        {
          "element": "Match Text",
          "from": "text-emerald-700",
          "to": "text-emerald-400",
          "reason": "Higher contrast on dark glass background"
        },
        {
          "element": "Secondary Text",
          "from": "text-gray-600",
          "to": "text-white/80",
          "reason": "Consistent light text on dark glass"
        }
      ]
    },
    "CreateEventModal": {
      "changes": [
        {
          "element": "Modal Container",
          "from": "bg-white rounded-t-3xl",
          "to": "bg-white rounded-t-[2rem] shadow-[0_-8px_32px_rgba(0,0,0,0.15)]",
          "reason": "Upward shadow for bottom sheet modal pattern"
        },
        {
          "element": "Submit Button",
          "from": "py-4",
          "to": "py-4 min-h-[52px]",
          "reason": "Comfortable touch target for primary action"
        }
      ]
    },
    "MapView": {
      "changes": [
        {
          "element": "Event Detail Card",
          "from": "bg-white/95 backdrop-blur-2xl shadow-2xl",
          "to": "bg-white/98 backdrop-blur-2xl shadow-[0_-12px_48px_rgba(0,0,0,0.2)] border border-gray-100",
          "reason": "Upward shadow for bottom sheet, near-opaque for legibility"
        },
        {
          "element": "Mode Toggle Buttons",
          "from": "px-4 py-3",
          "to": "px-5 py-3.5 min-h-[48px]",
          "reason": "Meet touch target requirements"
        },
        {
          "element": "Legend Container",
          "from": "bg-white/90 backdrop-blur-xl",
          "to": "bg-white/95 backdrop-blur-xl shadow-[0_4px_16px_rgba(0,0,0,0.1)]",
          "reason": "Slightly more opaque with visible shadow"
        }
      ]
    },
    "SectionHeaders": {
      "changes": [
        {
          "element": "Section Container",
          "from": "mb-4",
          "to": "mb-6",
          "reason": "More breathing room between header and content"
        },
        {
          "element": "Icon Container",
          "from": "p-1.5 rounded-md",
          "to": "p-2 rounded-lg",
          "reason": "Slightly larger icon containers for visual balance"
        },
        {
          "element": "Section Title",
          "from": "text-lg font-bold",
          "to": "text-lg font-bold tracking-tight",
          "reason": "Tighter tracking for display text"
        }
      ]
    }
  },

  "tailwindConfigExtensions": {
    "colors": {
      "brand": {
        "primary": "#B4FF39",
        "primary-hover": "#a3ed28"
      },
      "surface": {
        "base": "#F8F9FA",
        "card": "#FFFFFF"
      }
    },
    "boxShadow": {
      "card": "0 4px 24px rgba(0, 0, 0, 0.06)",
      "card-hover": "0 8px 32px rgba(0, 0, 0, 0.1)",
      "float": "0 8px 40px rgba(0, 0, 0, 0.15)",
      "nav": "0 8px 40px rgba(0, 0, 0, 0.5)",
      "glass": "0 8px 32px rgba(0, 0, 0, 0.08)",
      "up-sheet": "0 -12px 48px rgba(0, 0, 0, 0.2)"
    },
    "backdropBlur": {
      "xs": "2px",
      "3xl": "64px"
    },
    "spacing": {
      "11": "2.75rem",
      "13": "3.25rem",
      "15": "3.75rem"
    },
    "minHeight": {
      "touch": "44px",
      "touch-lg": "48px"
    },
    "minWidth": {
      "touch": "44px",
      "touch-lg": "48px"
    }
  },

  "accessibilityNotes": {
    "contrastRequirements": {
      "normalText": "4.5:1 minimum (WCAG AA)",
      "largeText": "3:1 minimum (WCAG AA)",
      "interactiveElements": "3:1 minimum against adjacent colors"
    },
    "touchTargets": {
      "minimum": "44x44px (WCAG 2.1 Level AAA)",
      "recommended": "48x48px for primary actions"
    },
    "focusIndicators": {
      "style": "ring-2 ring-offset-2 ring-brand-primary",
      "note": "All interactive elements must have visible focus states"
    }
  },

  "implementationOrder": [
    {
      "priority": 1,
      "task": "Update touch targets across all interactive elements",
      "files": ["FloatingNav.tsx", "ForkedCard.tsx", "NicheCard.tsx", "Index.tsx", "MapView.tsx"]
    },
    {
      "priority": 2,
      "task": "Fix glass effect contrast for badges on images",
      "files": ["AnchorCard.tsx", "SmartBadge.tsx"]
    },
    {
      "priority": 3,
      "task": "Implement new shadow system for depth hierarchy",
      "files": ["tailwind.config.ts", "AnchorCard.tsx", "ForkedCard.tsx", "NicheCard.tsx"]
    },
    {
      "priority": 4,
      "task": "Standardize spacing and section headers",
      "files": ["Index.tsx"]
    },
    {
      "priority": 5,
      "task": "Update modal and bottom sheet shadows",
      "files": ["CreateEventModal.tsx", "MapView.tsx"]
    }
  ]
}
